{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"react-router-dom\"","webpack:///./src/components/routes.js","webpack:///./src/server/index.js","webpack:///external \"express\"","webpack:///external \"cors\"","webpack:///external \"react-dom/server\"","webpack:///external \"serialize-javascript\"","webpack:///./src/components/App.js","webpack:///./src/components/Home.js","webpack:///./src/components/Grid.js","webpack:///./src/components/api.js","webpack:///external \"isomorphic-fetch\"","webpack:///./src/components/Navbar.js","webpack:///./src/components/NoMatch.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_api","routes","path","exact","component","Home","Grid","fetchInitialData","arguments","length","undefined","fetchPopularRepos","split","pop","_server","_reactRouterDom","app","_express2","default","use","_cors2","express","static","req","res","next","activeRoute","find","route","matchPath","url","Promise","resolve","then","data","context","markup","renderToString","_react2","createElement","StaticRouter","location","_App2","send","_serializeJavascript2","catch","listen","console","log","_react","App","Component","_Navbar2","Switch","map","_ref","rest","_objectWithoutProperties","Route","render","props","_extends","_NoMatch2","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","repos","staticContext","state","loading","fetchRepos","match","params","id","prevProps","prevState","lang","_this2","setState","_state","style","display","flexWrap","owner","stargazers_count","html_url","margin","href","login","language","encodedURI","encodeURI","_isomorphicFetch2","json","items","error","warn","_isomorphicFetch","param","NavLink","activeStyle","fontWeight","to"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,IAIAlC,IAAAmC,EAAA,mBClFAhC,EAAAD,QAAAkC,QAAA,wBCAAjC,EAAAD,QAAAkC,QAAA,mGCAA,QAAApC,EAAA,QACAA,EAAA,KACAqC,EAAArC,EAAA,uDAEA,IAAMsC,EAAU,CACd,CACEC,KAAM,IACNC,OAAO,EACPC,UAAWC,WAEb,CACEH,KAAM,eACNE,UAAWE,UACXC,iBAAkB,eAACL,EAADM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAQ,GAAR,OAAe,EAAAR,EAAAW,mBAAkBT,EAAKU,MAAM,KAAKC,oBAIxDZ,gCCjBf,QAAAtC,EAAA,QACAA,EAAA,QACAA,EAAA,IACAmD,EAAAnD,EAAA,GACAoD,EAAApD,EAAA,OACAA,EAAA,QACAA,EAAA,QACAA,EAAA,uDAEA,IAAMqD,GAAM,EAAAC,EAAAC,WAEZF,EAAIG,KAAI,EAAAC,EAAAF,YACRF,EAAIG,IAAIE,UAAQC,OAAO,WAEvBN,EAAIpC,IAAI,IAAK,SAAC2C,EAAKC,EAAKC,GACtB,IAAMC,EAAczB,UAAO0B,KAAK,SAACC,GAAD,OAAW,EAAAb,EAAAc,WAAUN,EAAIO,IAAKF,MAAW,IAEzDF,EAAYnB,iBACxBmB,EAAYnB,iBAAiBgB,EAAIrB,MACjC6B,QAAQC,WAEJC,KAAK,SAACC,GACZ,IAAMC,EAAU,CAAED,QAEZE,GAAS,EAAAtB,EAAAuB,gBACbC,EAAApB,QAAAqB,cAACxB,EAAAyB,aAAD,CAAcC,SAAUlB,EAAIO,IAAKK,QAASA,GACxCG,EAAApB,QAAAqB,cAACG,EAAAxB,QAAD,QAIJM,EAAImB,KAAJ,kMAM0C,EAAAC,EAAA1B,SAAUgB,GANpD,0EAUsBE,EAVtB,kDAcCS,MAAMpB,KAGXT,EAAI8B,OAAO,IAAM,WACfC,QAAQC,IAAR,sDChDFlF,EAAAD,QAAAkC,QAAA,0BCAAjC,EAAAD,QAAAkC,QAAA,uBCAAjC,EAAAD,QAAAkC,QAAA,mCCAAjC,EAAAD,QAAAkC,QAAA,ogBCAAkD,EAAAtF,EAAA,cACAA,EAAA,IACAoD,EAAApD,EAAA,OACAA,EAAA,SACAA,EAAA,4DAEMuF,grBAAYC,iDAEd,OACEb,EAAApB,QAAAqB,cAAA,WACED,EAAApB,QAAAqB,cAACa,EAAAlC,QAAD,MAEAoB,EAAApB,QAAAqB,cAACxB,EAAAsC,OAAD,KACGpD,UAAOqD,IAAI,SAAAC,GAAA,IAAGrD,EAAHqD,EAAGrD,KAAMC,EAAToD,EAASpD,MAAkBgD,EAA3BI,EAAgBnD,UAAyBoD,yHAAzCC,CAAAF,EAAA,qCACVjB,EAAApB,QAAAqB,cAACxB,EAAA2C,MAAD,CAAOpE,IAAKY,EAAMA,KAAMA,EAAMC,MAAOA,EAAOwD,OAAQ,SAACC,GAAD,OAClDtB,EAAApB,QAAAqB,cAACY,EAADU,EAAA,GAAeD,EAAWJ,SAG9BlB,EAAApB,QAAAqB,cAACxB,EAAA2C,MAAD,CAAOC,OAAQ,SAACC,GAAD,OAAWtB,EAAApB,QAAAqB,cAACuB,EAAA5C,QAAY0C,2BAOlCV,2FCvBA,WACb,OACEZ,EAAApB,QAAAqB,cAAA,iCAJJ,MAAAU,EAAAtF,EAAA,iXCAAsF,EAAAtF,EAAA,2CAEM2C,cACJ,SAAAA,EAAYsD,gGAAOG,CAAAC,KAAA1D,GAAA,IAAA2D,mKAAAC,CAAAF,MAAA1D,EAAA6D,WAAA1F,OAAA2F,eAAA9D,IAAApC,KAAA8F,KACXJ,IAEFS,SAHa,OAQfA,EAAQJ,EAAKL,MAAMU,cAAcpC,KAGnC+B,EAAKM,MAAQ,CACXF,QACAG,SAASH,GAGXJ,EAAKQ,WAAaR,EAAKQ,WAAWlF,KAAhB0E,GAhBDA,qUADFd,4DAoBVa,KAAKO,MAAMF,OACdL,KAAKS,WAAWT,KAAKJ,MAAMc,MAAMC,OAAOC,+CAGxBC,EAAWC,GACzBD,EAAUH,MAAMC,OAAOC,KAAOZ,KAAKJ,MAAMc,MAAMC,OAAOC,IACxDZ,KAAKS,WAAWT,KAAKJ,MAAMc,MAAMC,OAAOC,uCAGhCG,GAAM,IAAAC,EAAAhB,KAChBA,KAAKiB,SAAS,iBAAO,CACnBT,SAAS,KAGXR,KAAKJ,MAAMrD,iBAAiBwE,GACzB9C,KAAK,SAACoC,GAAD,OAAWW,EAAKC,SAAS,iBAAO,CACpCZ,QACAG,SAAS,wCAGN,IAAAU,EACoBlB,KAAKO,MAAxBC,EADDU,EACCV,QAASH,EADVa,EACUb,MAEjB,OAAgB,IAAZG,EACKlC,EAAApB,QAAAqB,cAAA,oBAIPD,EAAApB,QAAAqB,cAAA,MAAI4C,MAAO,CAACC,QAAS,OAAQC,SAAU,SACpChB,EAAMf,IAAI,SAAAC,GAAA,IAAGjF,EAAHiF,EAAGjF,KAAMgH,EAAT/B,EAAS+B,MAAOC,EAAhBhC,EAAgBgC,iBAAkBC,EAAlCjC,EAAkCiC,SAAlC,OACTlD,EAAApB,QAAAqB,cAAA,MAAIjD,IAAKhB,EAAM6G,MAAO,CAACM,OAAQ,KAC7BnD,EAAApB,QAAAqB,cAAA,UACED,EAAApB,QAAAqB,cAAA,UAAID,EAAApB,QAAAqB,cAAA,KAAGmD,KAAMF,GAAWlH,IACxBgE,EAAApB,QAAAqB,cAAA,cAAM+C,EAAMK,OACZrD,EAAApB,QAAAqB,cAAA,UAAKgD,EAAL,WAEFjD,EAAApB,QAAAqB,cAAA,mDAQGjC,mFChECK,kBAAT,WAA8C,IAAlBiF,EAAkBpF,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,MACtCqF,EAAaC,4EAA4EF,EAA5E,4CAEnB,OAAO,EAAAG,EAAA7E,SAAM2E,GACV5D,KAAK,SAACC,GAAD,OAAUA,EAAK8D,SACpB/D,KAAK,SAACoC,GAAD,OAAWA,EAAM4B,QACtBpD,MAAM,SAACqD,GAEN,OADAnD,QAAQoD,KAAKD,GACN,QAVb,MAAAE,EAAAzI,EAAA,uDCAAG,EAAAD,QAAAkC,QAAA,6GCGe,WAkBb,OACEuC,EAAApB,QAAAqB,cAAA,UAlBgB,CAAC,CACjBjE,KAAM,MACN+H,MAAO,OACN,CACD/H,KAAM,aACN+H,MAAO,cACN,CACD/H,KAAM,OACN+H,MAAO,QACN,CACD/H,KAAM,SACN+H,MAAO,UACN,CACD/H,KAAM,OACN+H,MAAO,SAKM/C,IAAI,SAAAC,GAAA,IAAGjF,EAAHiF,EAAGjF,KAAM+H,EAAT9C,EAAS8C,MAAT,OACb/D,EAAApB,QAAAqB,cAAA,MAAIjD,IAAK+G,GACP/D,EAAApB,QAAAqB,cAACxB,EAAAuF,QAAD,CAASC,YAAa,CAACC,WAAY,QAASC,GAAA,YAAgBJ,GACzD/H,QA1Bb,MAAA2E,EAAAtF,EAAA,uCACAoD,EAAApD,EAAA,4FCCe,WACb,OACE2E,EAAApB,QAAAqB,cAAA,4BAJJ,MAAAU,EAAAtF,EAAA","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = require(\"react\");","module.exports = require(\"react-router-dom\");","import Home from './Home'\nimport Grid from './Grid'\nimport { fetchPopularRepos } from './api'\n\nconst routes =  [\n  {\n    path: '/',\n    exact: true,\n    component: Home,\n  },\n  {\n    path: '/popular/:id',\n    component: Grid,\n    fetchInitialData: (path = '') => fetchPopularRepos(path.split('/').pop())\n  }\n]\n\nexport default routes","import express from \"express\"\nimport cors from \"cors\"\nimport React from \"react\"\nimport { renderToString } from \"react-dom/server\"\nimport { StaticRouter, matchPath } from \"react-router-dom\"\nimport serialize from \"serialize-javascript\"\nimport App from '../components/App'\nimport routes from '../components/routes'\n\nconst app = express()\n\napp.use(cors())\napp.use(express.static(\"public\"))\n\napp.get(\"*\", (req, res, next) => {\n  const activeRoute = routes.find((route) => matchPath(req.url, route)) || {}\n\n  const promise = activeRoute.fetchInitialData\n    ? activeRoute.fetchInitialData(req.path)\n    : Promise.resolve()\n\n  promise.then((data) => {\n    const context = { data }\n\n    const markup = renderToString(\n      <StaticRouter location={req.url} context={context}>\n        <App />\n      </StaticRouter>\n    )\n\n    res.send(`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>SSR with RR</title>\n          <script src=\"/bundle.js\" defer></script>\n          <script>window.__INITIAL_DATA__ = ${serialize(data)}</script>\n        </head>\n\n        <body>\n          <div id=\"app\">${markup}</div>\n        </body>\n      </html>\n    `)\n  }).catch(next)\n})\n\napp.listen(3000, () => {\n  console.log(`Server is listening on port: 3000`)\n})\n\n/*\n  1) Just get shared App rendering to string on server then taking over on client.\n  2) Pass data to <App /> on server. Show diff. Add data to window then pick it up on the client too.\n  3) Instead of static data move to dynamic data (github gists)\n  4) add in routing.\n*/","module.exports = require(\"express\");","module.exports = require(\"cors\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"serialize-javascript\");","import React, { Component } from 'react'\nimport routes from './routes'\nimport { Route, Link, Redirect, Switch } from 'react-router-dom'\nimport Navbar from './Navbar'\nimport NoMatch from './NoMatch'\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Navbar />\n\n        <Switch>\n          {routes.map(({ path, exact, component: Component, ...rest }) => (\n            <Route key={path} path={path} exact={exact} render={(props) => (\n              <Component {...props} {...rest} />\n            )} />\n          ))}\n          <Route render={(props) => <NoMatch {...props} /> } />\n        </Switch>\n      </div>\n    )\n  }\n}\n\nexport default App","import React from 'react'\n\nexport default function Home () {\n  return (\n    <div>\n      Select a Language\n    </div>\n  )\n}","import React, { Component } from 'react'\n\nclass Grid extends Component {\n  constructor(props) {\n    super(props)\n\n    let repos\n    if (__isBrowser__) {\n      repos = window.__INITIAL_DATA__\n      delete window.__INITIAL_DATA__\n    } else {\n      repos = this.props.staticContext.data\n    }\n\n    this.state = {\n      repos,\n      loading: repos ? false : true,\n    }\n\n    this.fetchRepos = this.fetchRepos.bind(this)\n  }\n  componentDidMount () {\n    if (!this.state.repos) {\n      this.fetchRepos(this.props.match.params.id)\n    }\n  }\n  componentDidUpdate (prevProps, prevState) {\n    if (prevProps.match.params.id !== this.props.match.params.id) {\n      this.fetchRepos(this.props.match.params.id)\n    }\n  }\n  fetchRepos (lang) {\n    this.setState(() => ({\n      loading: true\n    }))\n\n    this.props.fetchInitialData(lang)\n      .then((repos) => this.setState(() => ({\n        repos,\n        loading: false,\n      })))\n  }\n  render() {\n    const { loading, repos } = this.state\n\n    if (loading === true) {\n      return <p>LOADING</p>\n    }\n\n    return (\n      <ul style={{display: 'flex', flexWrap: 'wrap'}}>\n        {repos.map(({ name, owner, stargazers_count, html_url }) => (\n          <li key={name} style={{margin: 30}}>\n            <ul>\n              <li><a href={html_url}>{name}</a></li>\n              <li>@{owner.login}</li>\n              <li>{stargazers_count} stars</li>\n            </ul>\n            <button>click here</button>\n          </li>\n        ))}\n      </ul>\n    )\n  }\n}\n\nexport default Grid","import fetch from 'isomorphic-fetch'\n\nexport function fetchPopularRepos (language = 'all') {\n  const encodedURI = encodeURI(`https://api.github.com/search/repositories?q=stars:>1+language:${language}&sort=stars&order=desc&type=Repositories`)\n\n  return fetch(encodedURI)\n    .then((data) => data.json())\n    .then((repos) => repos.items)\n    .catch((error) => {\n      console.warn(error)\n      return null\n    });\n}","module.exports = require(\"isomorphic-fetch\");","import React from 'react'\nimport { NavLink } from 'react-router-dom'\n\nexport default function Navbar () {\n  const languages = [{\n    name: 'All',\n    param: 'all'\n  }, {\n    name: 'JavaScript',\n    param: 'javascript',\n  }, {\n    name: 'Ruby',\n    param: 'ruby',\n  }, {\n    name: 'Python',\n    param: 'python',\n  }, {\n    name: 'Java',\n    param: 'java',\n  }]\n\n  return (\n    <ul>\n      {languages.map(({ name, param }) => (\n        <li key={param}>\n          <NavLink activeStyle={{fontWeight: 'bold'}} to={`/popular/${param}`}>\n            {name}\n          </NavLink>\n        </li>\n      ))}\n    </ul>\n  )\n}","import React from 'react'\n\nexport default function NoMatch () {\n  return (\n    <div>\n      Four Oh Four\n    </div>\n  )\n}"],"sourceRoot":""}